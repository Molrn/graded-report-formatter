{% load static %}

<link rel="stylesheet" href="{% static 'grf/css/report-display.css' %}">
<link rel="stylesheet" href="{% static 'grf/css/multi-level-numbering.css' %}">

<style id="editable-style" contenteditable style="display:block; white-space: pre;"></style>

<div id="report-title">{{ report.title }}</div>
{% for report_part in report.reportpart_set.all|dictsort:"order" %}
    {% if report_part.is_included %}
        <div class="report-part" id="part-{{ report_part.id }}">
            <h1 class="counter" >{{ report_part.title }}</h1>
            <div class="content">
                <div class="part-content">{{ report_part.introduction|safe }}</div>
                {% if report_part.reportsubpart_set.all %}
                <div class="subparts">
                    {% for subpart in report_part.reportsubpart_set.all|dictsort:"order" %}
                        {% include "report/subpart-display.html" with subpart=subpart is_graded=report_part.is_graded depth=2 %}
                    {% endfor %}
                </div>  
                {% endif %}      
            </div>
        </div>
    {% endif %}    
{% endfor %}

<script>
    fetch('/static/grf/css/report-display.css')
        .then(response => response.text())
        .then(cssContent => {
            document.getElementById('editable-style').innerHTML = cssContent;
        })
        .catch(error => {
            console.error('Error fetching CSS:', error);
        });
</script>
