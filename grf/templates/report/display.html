{% load static %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/mode/css/css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/addon/hint/show-hint.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/addon/hint/css-hint.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/addon/hint/show-hint.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/codemirror.min.css">

<link rel="stylesheet" href="{% static 'grf/css/multi-level-numbering.css' %}">
<script src="{% static 'grf/js/editable-style.js' %}" defer></script>

<div id="editable-style">
    Document style:
    <style report-id="{{ report.id }}"></style>
    <textarea id="css-editor">{{ report.css_style }}</textarea>
    <button onclick="saveReportStyle()">Save style</button>
    <br/><br/>
</div>

<div id="report-title">{{ report.title }}</div>
{% for report_part in report.reportpart_set.all|dictsort:"order" %}
    {% if report_part.is_included %}
        <div class="report-part" id="part-{{ report_part.id }}">
            <h1 class="counter" >{{ report_part.title }}</h1>
            <div class="content">
                <div class="part-content">{{ report_part.introduction|safe }}</div>
                {% if report_part.reportsubpart_set.all %}
                <div class="subparts">
                    {% for subpart in report_part.reportsubpart_set.all|dictsort:"order" %}
                        {% include "report/subpart-display.html" with subpart=subpart is_graded=report_part.is_graded depth=2 %}
                    {% endfor %}
                </div>  
                {% endif %}      
            </div>
        </div>
    {% endif %}    
{% endfor %}
