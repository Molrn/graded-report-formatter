{% load static %}
<link rel="stylesheet" href="{% static 'grf/css/styles.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
<script src="{% static 'grf/js/sortable-accordion.js' %}"></script>

<h1>{{ object.title }}</h1>
<div class="accordion" id="reportAccordion">
    {% for report_part in report.reportpart_set.all|dictsort:"order" %}
        <div class="accordion-item">
            <div class="accordion-header">
                <span class="accordion-drag-handle">&#9776;</span> 
                <input type="text" class="title" value="{{ report_part.title }}">
                <input type="checkbox" title="include" class="include" value="{{ report_part.is_graded }}">
                <button class="accordion-toggle">&#9660;</button>
            </div>
            <div class="accordion-content">
                <textarea class="introduction" cols="30" rows="3">{{ report_part.introduction }}</textarea>
                {% if report_part.reportsubpart_set.all %}
                    <div class="accordion" id="part-{{ report_part.id }}">
                        {% include "report/subpart.html" with subparts=report_part.reportsubpart_set.all|dictsort:"order" %}
                    </div>
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
